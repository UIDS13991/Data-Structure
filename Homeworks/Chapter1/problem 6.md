<div dir="rtl">

# سوال 3 - لینک لیست دو طرفه


+ محدودیت زمان: ۲ ثانیه
+ محدودیت حافظه: ۲۵۶ مگابایت

منبع تمرین: [گاز و گزل، تمرین داده‌ساختار دانشگاه صنعتی شریف - پاییز ۹۳](https://quera.ir/problemset/university/712/%D8%B3%D8%A4%D8%A7%D9%84-%D8%AF%D8%A7%D9%86%D8%B4%DA%AF%D8%A7%D9%87-%D8%B5%D9%86%D8%B9%D8%AA%DB%8C-%D8%B4%D8%B1%DB%8C%D9%81-%D8%AF%D8%A7%D8%AF%D9%87-%D8%B3%D8%A7%D8%AE%D8%AA%D8%A7%D8%B1-%D9%BE%D8%A7%DB%8C%DB%8C%D8%B2-%DB%B9%DB%B3-%DA%AF%D8%A7%D8%B2-%D9%88-%DA%AF%D8%B2%D9%84)

**توجه: برای حل این تمرین و دریافت نمره‌ی کامل پس از بررسی دستیاران، باید از لیست پیوندی دو طرفه استفاده کنید. هم‌چنین باید لیست را خودتان پیاده‌سازی کنید و استفاده از لیست‌های آماده‌ی زبان‌های برنامه‌نویسی مجاز نیست.**

----------
گاز تعداد زیادی نوار کاست قدیمی دارد که آن‌ها را در یک ردیف چیده و به ترتیب از ۱ تا $n$ نام‌گذاری کرده است. گزل که از دیدن این تعداد نوار کاست حیرت‌زده شده از گاز می‌خواهد که اجازه دهد با نوارها بازی کند. گاز قبول می‌کند. سپس همه‌ی آن‌ها را برعکس می‌کند جوری که گزل شماره آن‌ها را نبیند و به او می‌گوید که در هر مرحله یک از دو کار زیر را از تو می‌خواهم:

1. ترتیب قرار گرفتن نوارهای جایگاه $i$ام تا $j$ام را برعکس کنی.
2. شماره نوار در جایگاه $k$ام را به من بگویی.

شما باید برنامه‌ای بنویسید که با دریافت تعداد کاست‌ها و دنباله کارهای فوق به گزل کمک کند که کارهای خواسته‌شده را انجام دهد و به پرسش‌های گاز به درستی پاسخ دهد.

# ورودی

در خط اول ورودی عدد $n$ تعداد نوارهای کاست وارد می‌شود. سپس عدد $m$ که تعداد مرحله‌های بازیست وارد می‌شود و سپس در $m$ خط بعد در هر خط یکی از دو ورودی `REV i j` که نشان‌دهنده‌ی خواسته‌ اول است و یا `NAME K` که نشان‌دهنده‌ی خواسته‌ی دوم است آورده می‌شود.

# خروجی

به ازای هر پرسش `NAME k` شماره کاست در جایگاه $k$ را چاپ کنید.

# مثال
## ورودی نمونه

<div dir="ltr">

```
10
5
NAME 1
REV 1 10
NAME 2
REV 3 7
NAME 6
```
</div>

## خروجی نمونه


<div dir="ltr">

```
1
9
7
```
</div>

**توجه:**لطفا تمامی حالات استثنا (لیست صفر عنصری یا یک عنصری یا...)را در نظر داشته باشید تا نمره کامل را دریافت نمایید.

</div>